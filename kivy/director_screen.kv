<DirectorScreen>:
    on_enter: self.ids.screen_manager.current = "customers" 
    MDNavigationLayout:
        MDScreenManager:
            id: screen_manager

            MDScreen:
                name: "customers"
                MDBoxLayout:
                    orientation: "vertical"
                    MDTopAppBar:
                        title: "Customer Management"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    MDLabel:
                        text: "Customer management content"
                        halign: "center"
            # Màn hình Employees
            MDScreen:
                name: "employees"
                MDBoxLayout:
                    orientation: "vertical"
                    spacing: "0dp"
                    padding: "0dp"
                    size_hint: 1,1

                    # Thanh công cụ
                    MDTopAppBar:
                        title: "Employee Management"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                        right_action_items: [["refresh", lambda x: root.refresh_employees()]]
                        elevation: 10

                    # Ô tìm kiếm và nút thêm mới
                    MDBoxLayout:
                        size_hint_y: None
                        height: "50dp"
                        spacing: "10dp"
                        padding: "10dp", "0dp", "10dp", "0dp"

                        MDTextField:
                            id: search_field
                            hint_text: "Search Employee"
                            mode: "fill"
                            size_hint_x: 0.2
                            height: "30dp"
                            icon_right: "magnify"
                            on_text: root.search_employees(self.text)

                        Widget:
                            size_hint_x: 0.2

                        MDRectangleFlatIconButton:
                            text: "Add Employees"
                            size_hint_x: 0.15
                            md_bg_color: [0.9, 0.9, 0.9, 1]  # Màu nền xám nhạt
                            text_color: [0.2, 0.2, 0.2, 1]   # Màu chữ tối
                            line_color: [0.7, 0.7, 0.7, 1]    # Màu viền (nếu cần)

                            on_release: root.show_add_employee_dialog()

                        MDRectangleFlatIconButton:
                            text: "Delete Employees"
                            size_hint_x: 0.15
                            md_bg_color: [0.9, 0.9, 0.9, 1]  # Màu nền xám nhạt
                            text_color: [0.2, 0.2, 0.2, 1]   # Màu chữ tối
                            line_color: [0.7, 0.7, 0.7, 1]    # Màu viền (nếu cần)

                        # Bảng dữ liệu - Phần cần chỉnh sửa
                    ScrollView:
                        size_hint: 1, 1
                        bar_width: "8dp"
                        bar_color: app.theme_cls.primary_color
                        
                        MDBoxLayout:
                            id: table_container
                            orientation: "vertical"
                            size_hint_y: None
                            height: self.minimum_height
                            padding: "10dp"
                            spacing: "2dp"  # Giảm khoảng cách giữa các dòng

                            # Label tạm thời (sẽ bị thay thế bằng bảng)
                            MDLabel:
                                id: placeholder
                                text: "Loading..."
                                halign: "center"
                                font_style: "H6"
                                size_hint_y: None
                                height: "300dp"



            MDScreen:
                name: "transactions"
                MDBoxLayout:
                    orientation: "vertical"
                    MDTopAppBar:
                        title: "Transaction History"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]

                        # Ô tìm kiếm
                    MDBoxLayout:
                        size_hint_y: None
                        height: "50dp"
                        spacing: "10dp"
                        padding: "10dp", "0dp", "10dp", "0dp"


                        Widget:
                            size_hint_x: 0.8
                        # Bảng dữ liệu - Phần cần chỉnh sửa
                    ScrollView:
                        size_hint: 1, 1
                        bar_width: "8dp"
                        bar_color: app.theme_cls.primary_color
                        
                        MDBoxLayout:
                            id: table_container
                            orientation: "vertical"
                            size_hint_y: None
                            height: self.minimum_height
                            padding: "10dp"
                            spacing: "2dp"  # Giảm khoảng cách giữa các dòng
            MDScreen:
                name: "history"
                MDBoxLayout:
                    orientation: "vertical"
                    MDTopAppBar:
                        title: "History"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    MDLabel:
                        text: "History content"
                        halign: "center"

            MDScreen:
                name: "suspicion"
                MDBoxLayout:
                    orientation: "vertical"
                    MDTopAppBar:
                        title: "Suspicious Employees"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    MDLabel:
                        text: "Suspicious employees content"
                        halign: "center"

            MDScreen:
                name: "report"
                MDBoxLayout:
                    orientation: "vertical"
                    MDTopAppBar:
                        title: "Reports"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    ReportBox:
                        id: report_box
                       

            MDScreen:
                name: "system"
                MDBoxLayout:
                    orientation: "vertical"
                    MDTopAppBar:
                        title: "System Settings"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    MDLabel:
                        text: "System settings content"
                        halign: "center"

        MDNavigationDrawer:
            id: nav_drawer
            radius: 0, dp(16), dp(16), 0
            MDNavigationDrawerMenu:

                MDNavigationDrawerHeader:
                    title: "Director Panel"
                    title_color: "#4a4939"
                    spacing: "4dp"
                    padding: "16dp", "8dp", 0, "8dp"

                MDNavigationDrawerDivider:

                DrawerItem:
                    icon: "account-group"
                    text: "Customers"
                    on_release:
                        screen_manager.current = "customers"
                        nav_drawer.set_state("close")

                DrawerItem:
                    icon: "account"
                    text: "Employees"
                    on_release:
                        screen_manager.current = "employees"
                        nav_drawer.set_state("close")

                DrawerItem:
                    icon: "history"
                    text: "Transactions"
                    on_release:
                        screen_manager.current = "transactions"
                        nav_drawer.set_state("close")

                DrawerItem:
                    icon: "account-alert"
                    text: "Suspicion"
                    on_release:
                        screen_manager.current = "suspicion"
                        nav_drawer.set_state("close")

                DrawerItem:
                    icon: "file-chart"
                    text: "Report"
                    on_release:
                        screen_manager.current = "report"
                        nav_drawer.set_state("close")

                DrawerItem:
                    icon: "cog"
                    text: "System"
                    on_release:
                        screen_manager.current = "system"
                        nav_drawer.set_state("close")

                MDNavigationDrawerDivider:
                    height: "1dp"

                DrawerItem:
                    icon: "arrow-left"
                    text: "Log Out"
                    on_release:
                        root.manager.transition.direction = "right"
                        root.manager.current = "main"
